language: dart
dart:
  - stable
os:
  - linux
sudo: false
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test # you need this source to get the right version of libstdc++6
    packages:
      - libstdc++6
      - fonts-droid
before_install:
  - echo "Folder atas before install $(pwd)"
  - cd ..
  - git clone https://github.com/flutter/flutter.git
  - export PATH=`pwd`/flutter/bin:`pwd`/flutter/bin/cache/dart-sdk/bin:$PATH
  - flutter doctor
install:
  - echo "Folder install saat ini $(pwd)"
  - flutter pub get
  - flutter test
before_script:
  - echo "Travis build folder $TRAVIS_BUILD_DIR"
script:
  - echo "Script yang akan dijalankan. Coba ls ya..."
  - ls
deploy:
  provider: releases
  api_key: $GITHUB_TOKEN
  file:
    - "./build/app/outputs/apk/release/app-armeabi-v7a-release.apk"
    - "./build/app/outputs/apk/release/app-arm64-v8a-release.apk"
  skip-cleanup: true
  on:
    tags: true
